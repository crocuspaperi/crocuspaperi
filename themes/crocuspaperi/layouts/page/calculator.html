{{ partial "header.html" . }}

<section class="landing row">
  <div class="ten offset-by-one columns calculator" id="calculator">
    <h2>Calculator</h2>

    <ul>
      <li>
        <radio-picker
          label="Design Types"
          index="1"
          :options="designTypes.options"
          v-model="designTypes.picked">
        </radio-picker>
      </li>

      <li>
        <products
          label="Products"
          index="2"
          :options="products.options"
          :design-price="designPrice"
          :design-price-total="designPriceTotal"
          @input="toggleProduct($event)">
        </products>
      </li>

      <li>
        <printing
          label="Printing"
          index="3"
          :picked-products="products.picked"
          :printing-price="printingPrice"
          :printing-price-total="printingPriceTotal"
          @input="chooseVariant($event)">
        </products>
      </li>

      <li>
        <radio-picker
          label="Delivery"
          index="4"
          :options="delivery.options"
          :total-price="deliveryPriceTotal"
          price-text="Delivery price"
          v-model="delivery.picked">
        </radio-picker>
      </li>
    </ul>

    <div class="calculator-total-price">
      <b>Total price: ~${totalPrice} EUR</b>
    </div>
  </div>
</section>

<script type="text/x-template" id="radio-picker-template">
  <div class="radio-picker">
    <b>${ index }. ${ label }: </b>

    <ul>
      <li v-for="option in options">
        <label>
          <input
            type="radio"
            :name="label"
            :value="option"
            :checked="option === value"
            @input="$emit('input', $event.target.value)" />
          <span>${ option }</span>
        </label>
      </li>
    </ul>

    <div v-if="priceText" class="radio-picker-total-price">
      <b>${ priceText }: ${ totalPrice } EUR</b>
    </div>
  </div>
</script>

<script type="text/x-template" id="products-template">
  <div class="products">
    <b>${ index }. ${ label }: </b>

    <ul>
      <li v-for="option in options">
        <i>${ designPrice(option) } EUR</i>
        <label>
          <input
            type="checkbox"
            :name="label"
            :value="option"
            @input="$emit('input', $event.target.value)" />
          ${ option }
        </label>
      </li>
    </ul>

    <div class="calculator-total-price">
      <b>Design price: ${ designPriceTotal } EUR</b>
    </div>
  </div>
</script>

<script type="text/x-template" id="printing-template">
  <div class="printing">
    <b>${ index }. ${ label }: </b>

    <ul class="printing-products">
      <li v-for="product in pickedProducts">
        <label>${ product }</label>

        <ul class="printing-variants">
          <li v-for="variant, name in variants(product)">
            <i>${ printingPrice(product, name) } EUR</i>
            <label>
              <input
                type="number"
                value="0"
                @input="$emit('input', { product: product, variant: name, value: $event.target.value })"
                min="0" />
              ${ name }
            </label>
          </li>
        </ul>
      </li>
    </ul>

    <div class="printing-total-price">
      <b>Printing price: ${ printingPriceTotal } EUR</b>
    </div>
  </div>
</script>

<script>
  var calculatorConfig = Object.freeze({{ .Site.Data.calculator }});
</script>

<!-- development version, includes helpful console warnings -->
<!-- <script src="/js/vue-dev.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.min.js"></script>
<script src="/js/calculator.js"></script>

{{ partial "footer.html" . }}
