{{ partial "header.html" . }}

<section class="landing row">
  <div class="ten offset-by-one columns calculator" id="calculator">
    <h2>Calculator</h2>

    <ul>
      <li>
        <radio-picker
          label="Design Types"
          index="1"
          :options="designTypes.options"
          description="<ul><li>* Template (choose a design from a collection of existing templates. Fonts, colour of the font, colors of certain illustrations can be changed and adapted to your preferences. If you need several elements, they won't be exactly the same. The floral arrangements and other illustrations will be changed to create multiple designs.)</li><li>* Custom (I create a new design with new illustrations based on your ideas and the overall style of your wedding)</li></ul>"
          v-model="designTypes.picked">
        </radio-picker>
      </li>

      <li>
        <products
          label="Products"
          index="2"
          :options="products.options"
          :design-price-total="designPriceTotal"
          description="(Choose which products you'll need. The design price depends on the amount of products.)"
          @input="toggleProduct($event)">
        </products>
      </li>

      <li>
        <variants
          label="Printing"
          index="3"
          :picked-products="products.picked"
          :price="printingPrice"
          :price-total="printingPriceTotal"
          description="(Choose the amount of copies for printing. Pricing price is stated for standard paper. I use White Cotton 300g by default. It's thick and it has soft textured surface. All the other papers are called 'Fancy'. All Fancy papers have the same price, samples are here)"
          price-text="Printing price"
          @input="chooseVariant($event)">
        </variants>
      </li>

      <li>
        <variants
          label="Additional products"
          index="4"
          :picked-products="additionalProducts.options"
          :price="additionalProductsPrice"
          :price-total="additionalProductsPriceTotal"
          price-text="Additional products price"
          :additional="true"
          @input="chooseAdditionalProduct($event)">
        </variants>
      </li>

      <li>
        <radio-picker
          label="Delivery"
          index="5"
          :options="delivery.options"
          :total-price="deliveryPriceTotal"
          price-text="Delivery price"
          description="<ul><li>* Pick up (in Kukkakauppa, Fredrikinkatu 16. Work hours & details here)</li><li>* Post (depends on the weight of the package)</li></ul>"
          v-model="delivery.picked">
        </radio-picker>
      </li>
    </ul>

    <div class="calculator-total-price">
      <b>Total price: ~${totalPrice} EUR</b>
    </div>
  </div>
</section>

<script type="text/x-template" id="radio-picker-template">
  <div class="radio-picker">
    <b>${ index }. ${ label }: </b>

    <ul>
      <li v-for="option in options">
        <label>
          <input
            type="radio"
            :name="label"
            :value="option"
            :checked="option === value"
            @input="$emit('input', $event.target.value)" />
          <span>${ option }</span>
        </label>
      </li>
    </ul>

    <div v-if="description" class="radio-picker-description" v-html="description">
    </div>

    <div v-if="priceText" class="radio-picker-total-price">
      <b>${ priceText }: ${ totalPrice } EUR</b>
    </div>
  </div>
</script>

<script type="text/x-template" id="products-template">
  <div class="products">
    <b>${ index }. ${ label }: </b>
    <div v-if="description" class="products-description" v-html="description">
    </div>

    <ul>
      <li v-for="option in options">
        <label>
          <input
            type="checkbox"
            :name="label"
            :value="option"
            @input="$emit('input', $event.target.value)" />
          ${ option }
        </label>
      </li>
    </ul>

    <div class="calculator-total-price">
      <b>Design price: ${ designPriceTotal } EUR</b>
    </div>
  </div>
</script>

<script type="text/x-template" id="variants-template">
  <div class="variants">
    <b>${ index }. ${ label }: </b>

    <div v-if="description" class="variants-description" v-html="description">
    </div>

    <ul class="variants-products">
      <li v-for="product in pickedProducts">
        <label>${ product }</label>

        <ul class="variants-variants">
          <li v-for="variant, name in variants(product)">
            <i>${ price(product, name) } EUR</i>
            <label>
              <input
                type="number"
                value="0"
                @input="$emit('input', { product: product, variant: name, value: $event.target.value })"
                min="0" />
              ${ name }
            </label>
          </li>
        </ul>
      </li>
    </ul>

    <div class="variants-total-price">
      <b>${ priceText }: ${ priceTotal } EUR</b>
    </div>
  </div>
</script>

<script>
  var calculatorConfig = Object.freeze({{ .Site.Data.calculator }});
</script>

<!-- development version, includes helpful console warnings -->
<!-- <script src="/js/vue-dev.min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.min.js"></script>
<script src="/js/calculator.js"></script>

{{ partial "footer.html" . }}
